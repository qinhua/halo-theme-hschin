var videoEmbeds=['iframe[src*="youtube.com"]','iframe[src*="vimeo.com"]'];reframe(videoEmbeds.join(","));var oldScrollTop,katex_config={delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1},{left:"\\(",right:"\\)",display:!1},{left:"\\[",right:"\\]",display:!0}]},sidebarToggle=document.querySelectorAll(".sidebar-toggle");if(sidebarToggle)for(var i=0;i<sidebarToggle.length;i++)sidebarToggle[i].addEventListener("click",function(e){var t=$("#headerCtrl"),n=$("#sidebarToggle");t&&t.toggleClass("no-show"),n&&n.toggleClass("menu-ctrl-on");var o=$("#scrollMenu");o&&o.toggleClass("scroll-menu-show");var a=$("#siteHeader");a&&a.toggleClass("site-header-scroll"),a.toggleClass("site-header-bg");var r=$("#sidebar");r&&r.toggleClass("sidebar-show"),e.preventDefault(),$(document.body).toggleClass("cancel-scroll")},{passive:!1});var han={lazyLoad:function(){$("#page").velocity("transition.slideDownBigIn",{stagger:200})},initLazyLoad:function(){$("#page").removeClass("transform-none")},refreshLazyLoad:function(){$("#page").addClass("transform-none")},lazyLoadCardItem:function(){$(".card-item-vel").velocity("transition.slideUpIn",{stagger:200,display:"flex"})},linksAddBlank:function(){var e=$(".post-content a");if(e)for(var t=0;t<e.length;t++)$(e[t]).attr("target","_blank")},getScrollTop:function(){var e=0;return document.documentElement&&document.documentElement.scrollTop?e=document.documentElement.scrollTop:document.body&&(e=document.body.scrollTop),e},scollHeader:function(){window.addEventListener("scroll",function(){var e=$("#siteHeader"),t=$("#scrollMenu"),n=$("#sidebarToggle"),o=han.getScrollTop();e&&o>0?(e.addClass("site-header-scroll"),t.addClass("scroll-menu-show"),n.hide()):(e.removeClass("site-header-scroll"),t.removeClass("scroll-menu-show"),n.show()),oldScrollTop=o},!1)},toggleSearch:function(){$(".js-toggle-search").on("click",function(){openSearchPanel(),$(".searchbox-input").focus(),this.makeMenuInvisible()})},makeMenuInvisible:function(){$("#sidebar").removeClass("sidebar-show"),$("#sidebarToggle").removeClass("menu-ctrl-on"),$(document.body).removeClass("sidebar-opened"),$(document.body).removeClass("cancel-scroll"),$(".side-bar-val").velocity("transition.slideUpOut",{stagger:200})},highlightMenu:function(){for(var e=document.getElementById("scrollMenu"),t=e.getElementsByTagName("a"),n=document.location.href,o=0,a=0;a<t.length;a++){var r=t[a].getAttribute("href");-1!==n.indexOf(r)&&(o=a)}$(t[o]).addClass("active-current");for(a=0;a<t.length;a++)o!==a&&$(t[a]).removeClass("active-current");var l=t[o];if($(l).parents(".sub-menu")){var s=$(l).parents(".sub-menu");$(s[0]).siblings("a").addClass("active-current")}},foldSubMenu:function(){$(".nav-menu-link").click(function(e){var t=$(this).children(".fa")[0];$(t).toggleClass("angle-transform");var n=$(this).siblings(".nav-sub-menu");n&&!$(this).siblings(".nav-sub-menu").hasClass("nav-menu-show")?(n.velocity("transition.slideDownIn",{duration:300}),n.addClass("nav-menu-show")):n&&$(this).siblings(".nav-sub-menu").hasClass("nav-menu-show")&&(n.velocity("transition.slideUpOut",{duration:300}),n.removeClass("nav-menu-show"))})},pagination:function(){$body=window.opera?"CSS1Compat"==document.compatMode?$("html"):$("body"):$("html,body"),$("body").on("click","#pagination a",function(){var e=$("#pagination");return e.html(""),e.append('<div class="loader-inner ball-pulse"><div/><div/><div/></div>'),$.ajax({type:"GET",url:$(this).attr("href"),success:function(t){result=$(t).find("#post-list .postItem"),pageInner=$(t).find("#pagination .inner"),$("#post-list").html(result.fadeIn(500)),e.empty(),e.append(pageInner),document.getElementById("postContainer").scrollIntoView()}}),!1})},initCodeCopy:function(){if(ClipboardJS){var e=document.querySelectorAll(".post-content pre code");if(e.length){for(var t=0;t<e.length;t++){var n="code_id_"+t,o=document.createElement("button");o.setAttribute("class","hljs-copy-btn"),o.setAttribute("data-clipboard-target","#"+n),e[t].setAttribute("id",n),o.innerHTML="复制代码",e[t].parentNode.insertBefore(o,e[t])}var a=new ClipboardJS(".hljs-copy-btn");a.on("success",function(e){alert("复制成功"),e.clearSelection()}),a.on("error",function(e){alert("矮油，复制失败了，但是已经全选了惹...手动复制吧勇士！")})}}},initBackToTop:function(){var e=$("#js-go_top");e.length&&e.gotoTop({offset:500,speed:300,animationShow:{opacity:1,"-webkit-transform":"translate3d(0,0,0) rotate(360deg)",transform:"translate3d(0,0,0) rotate(360deg)"},animationHide:{opacity:0,"-webkit-transform":"translate3d(80px,0,0) rotate(0deg)",transform:"translate3d(80px,0,0) rotate(0deg)"}})}};$(function(){han.lazyLoadCardItem(),han.linksAddBlank(),han.scollHeader(),han.toggleSearch(),han.highlightMenu(),han.foldSubMenu(),han.getScrollTop(),han.initBackToTop(),han.initCodeCopy()}),$(document).ready(function(){var e=document.querySelectorAll(".tree-hole-box");if(e)for(var t=0;t<e.length;t++)for(var n=$(e[t]).children("p:empty"),o=0;o<n.length;o++)n[o].remove()});