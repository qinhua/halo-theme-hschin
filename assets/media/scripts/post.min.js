var tocId="#toc",flagId="#tocFlag",post={appreciateModel:function(){$(".appreciate-btn").on("click",function(o){$(".qr-code-wrap").velocity("transition.expandIn",{duration:300}),$(document).one("click",function(){$(".qr-code-wrap").velocity("transition.expandOut",{duration:300})}),o.stopPropagation()})},toggleSocialShare:function(){$(".share-btn").on("click",function(o){var t=$("#socialShare");t.hasClass("show")?$("#socialShare").velocity("transition.slideUpOut",{duration:300}):$("#socialShare").velocity("transition.slideDownIn",{duration:300}),t.toggleClass("show")})},appreciate:function(){$(".qr-code").on("click",function(o){o.stopPropagation()}),$(".closinglayer").on("click",function(o){$(".qr-code-wrap").velocity("transition.expandOut",{duration:300})}),$(".zfb-btn").on("click",function(o){$(".qr_code_wx").hide(),$(".qr_code_zfb").show()}),$(".wx-btn").on("click",function(o){$(".qr_code_zfb").hide(),$(".qr_code_wx").show()})},removeFirstUL:function(){var o=document.getElementById("post-content");if(o){var t=o.firstElementChild.nodeName;"UL"===t&&$(o.firstElementChild).hide()}},getScrollTop:function(){return document.documentElement.scrollTop||document.body.scrollTop},tocScroll:function(o){var t=$(flagId);if(1!==t.length)return!1;var e=$(tocId),n=t.offset().top-.5*$(window).height(),i=post.getScrollTop(),c=$("#postHeader").height();i>c?e.show():e.hide();var r=document.querySelector(tocId);if(r&&r.getBoundingClientRect()){var a=r.getBoundingClientRect().height;i>n-.5*a?e.addClass("right-fixed"):e.removeClass("right-fixed"),post.tocParentActive(),o.preventDefault()}},scrollTocFixed:function(){window.addEventListener("scroll",post.tocScroll,!1)},initToc:function(){var o="h1,h2,h3,h4,h5,h6",t=".post-content";tocbot.init({tocSelector:"#toc",contentSelector:t,headingSelector:o,scrollSmooth:!0,headingsOffset:0-$("#postHeader").height(),hasInnerContainers:!1});var e=$(".toc-link");if(e)for(var n=0;n<e.length;n++){var i=e[n];i.after(document.createElement("span"))}},readProgress:function(){var o=$("#main"),t=$("#readProgress .read-progress-bar"),e=function(){var e=o.height()-window.innerHeight;if(!(e<=0)){var n=window.pageYOffset-o.offset().top,i=n/e*100+"%";t.width(i)}};displayReadProgress&&e(),$(window).on("scroll",function(){displayReadProgress&&e()})},initViewer:function(){document.getElementById("post-content")&&new Viewer(document.getElementById("post-content"),{toolbar:!1})},loadHighlight:function(){for(var o=document.querySelectorAll(".post-page pre code"),t=!!hljs.lineNumbersBlock,e=0;e<o.length;e++){var n=o[e];hljs.highlightBlock(n),t&&$("code.hljs").each(function(o,t){hljs.lineNumbersBlock(t)})}},tocHover:function(){$(".toc-list-item span").hover(function(){$(this).parent().find("a.toc-link:first").addClass("toc-hover")},function(){$(this).parent().find("a.toc-link:first").removeClass("toc-hover")})},tocParentActive:function(){var o=$(".is-active-li").parents("ol.toc-list.is-collapsible");o&&o.each(function(){$(this).parent().find("a.toc-link:first").addClass("toc-hover")});var t=$("ol.toc-list.is-collapsible.is-collapsed");t&&t.each(function(){$(this).parent().find("a.toc-link:first").removeClass("toc-hover")})},shareIcon:function(){var o={sites:["google","twitter","facebook","weibo","qq","tencent","qzone","linkedin","wechat","douban","diandian"],disabled:socialDisabled.split(",")};socialShare(".social-share",o)}};$(function(){post.appreciate(),post.initToc(),post.removeFirstUL(),post.scrollTocFixed(),post.readProgress(),post.loadHighlight(),post.appreciateModel(),post.toggleSocialShare(),post.initViewer(),post.tocHover()});